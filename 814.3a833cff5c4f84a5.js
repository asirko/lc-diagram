"use strict";(self.webpackChunklc_diagram=self.webpackChunklc_diagram||[]).push([[814],{2814:(Z,f,d)=>{d.r(f),d.d(f,{default:()=>A});var u=d(6814),_=d(239),e=d(5879);const x=["depDiv"];function y(t,s){1&t&&(e.O4$(),e._UZ(0,"path",6)),2&t&&e.uIk("d",s.$implicit)}function $(t,s){if(1&t&&(e.O4$(),e.TgZ(0,"svg",2)(1,"defs")(2,"marker",3),e._UZ(3,"polygon",4),e.qZA()(),e.YNc(4,y,1,1,"path",5),e.qZA()),2&t){const a=e.oxw();e.uIk("viewBox",a.viewBox),e.xp6(4),e.Q6J("ngForOf",a.arrowPaths)}}function S(t,s){if(1&t&&(e.TgZ(0,"div",9,10),e._uU(2),e.qZA()),2&t){const a=s.$implicit;e.uIk("data-name",a),e.xp6(2),e.hij(" ",a," ")}}function B(t,s){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,S,3,2,"div",8),e.qZA()),2&t){const a=s.$implicit;e.xp6(1),e.Q6J("ngForOf",a)}}const m={A:[],B:[],C:[],D:["A","B"],E:["B","C"],F:["D","E"]};var l=function(t){return t.StraightLine="Ligne simple",t.CubicBezier="Cubic Bezier simple",t.CubicBezierLighterCurve="Cubic Bezier adoucie",t.CubicBezierLighterIncidence="Cubic Bezier incidence inclin\xe9e",t}(l||{});let D=(()=>{var t;class s{constructor(){this.elementRef=(0,e.f3M)(e.SBq),this.cdr=(0,e.f3M)(e.sBO),this.spaceArrows=!1,this.arrowShape=l.CubicBezier,this.dependenciesByDepth=[]}ngOnChanges(){if(!this.dependenciesByDepth.length){let n=0,i=Object.entries(m);for(;i.length;)this.dependenciesByDepth[n]=[],i=i.filter(c=>{const[p,h]=c;return!h.every(r=>this.dependenciesByDepth.slice(0,-1).flat().includes(r))||(this.dependenciesByDepth[n].push(p),!1)}),n++}this.depDivs&&this._drawArrows()}ngAfterViewChecked(){const n=this.elementRef.nativeElement.getBoundingClientRect(),i=`${n.left} ${n.top} ${n.width} ${n.height}`;this.viewBox!==i&&(this.viewBox=i,this._drawArrows())}resize(){}_drawArrows(){const n=new Map;this.depDivs.forEach(i=>{const c=i.nativeElement.getAttribute("data-name"),p=i.nativeElement?.getBoundingClientRect();n.set(c,p)}),this.arrowPaths=[];for(const i of Object.keys(m))m[i]?.forEach(c=>{const p=n.get(c),h=n.get(i),r={x:p.left+p.width/2,y:p.top+p.height},o={x:h.left+h.width/2,y:h.top},w=r.x>o.x?-1:r.x===o.x?0:1;switch(this.spaceArrows&&(r.x+=w*p.width/6,o.x-=w*h.width/6),this.arrowShape){case l.StraightLine:this.arrowPaths.push(`M ${r.x} ${r.y} L ${o.x} ${o.y}`);break;case l.CubicBezier:this.arrowPaths.push(`M ${r.x} ${r.y} C ${r.x} ${o.y} ${o.x} ${r.y} ${o.x} ${o.y}`);break;case l.CubicBezierLighterCurve:const C=(r.y+o.y)/2;this.arrowPaths.push(`M ${r.x} ${r.y} C ${r.x} ${C} ${o.x} ${C} ${o.x} ${o.y}`);break;case l.CubicBezierLighterIncidence:const v=(r.x-o.x)/3;this.arrowPaths.push(`M ${r.x} ${r.y}C ${r.x-v} ${o.y} ${o.x+v} ${r.y} ${o.x} ${o.y}`)}});this.cdr.detectChanges()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["lcd-static-diagram"]],viewQuery:function(n,i){if(1&n&&e.Gf(x,5),2&n){let c;e.iGM(c=e.CRH())&&(i.depDivs=c)}},hostBindings:function(n,i){1&n&&e.NdJ("resize",function(){return i.resize()},!1,e.Jf7)},inputs:{spaceArrows:"spaceArrows",arrowShape:"arrowShape"},standalone:!0,features:[e.TTD,e.jDz],decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","dep-row",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg"],["id","arrowhead","markerWidth","6","markerHeight","4","refX","5","refY","2","orient","auto"],["points","0 0, 6 2, 0 4"],["stroke","#000","fill","none","stroke-width","2","marker-end","url(#arrowhead)",4,"ngFor","ngForOf"],["stroke","#000","fill","none","stroke-width","2","marker-end","url(#arrowhead)"],[1,"dep-row"],["class","dep",4,"ngFor","ngForOf"],[1,"dep"],["depDiv",""]],template:function(n,i){1&n&&(e.YNc(0,$,5,2,"svg",0),e.YNc(1,B,2,1,"div",1)),2&n&&(e.Q6J("ngIf",i.viewBox),e.xp6(1),e.Q6J("ngForOf",i.dependenciesByDepth))},dependencies:[u.ez,u.sg,u.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:5rem;position:relative}svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.dep-row[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.dep[_ngcontent-%COMP%]{border:1px solid black;padding:var(--space-s) var(--space-m);border-radius:var(--space-s)}"],changeDetection:0}),s})();var M=d(8237),g=d(95);function b(t,s){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"label")(2,"input",9),e.NdJ("ngModelChange",function(i){e.CHM(a);const c=e.oxw();return e.KtG(c.arrowShapeValue=i)}),e.qZA(),e._uU(3),e.qZA(),e.BQk()}if(2&t){const a=s.$implicit,n=e.oxw();e.xp6(2),e.Q6J("value",a)("ngModel",n.arrowShapeValue),e.xp6(1),e.hij(" ",a," ")}}let A=(()=>{var t;class s{constructor(){this.arrowShapes=Object.values(l),this.spaceArrowsValue=!1,this.arrowShapeValue=l.StraightLine}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["lcd-static-graph"]],standalone:!0,features:[e.jDz],decls:18,vars:4,consts:[[1,"selectors"],[1,"selector"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["path","./app/features/03-static-graph/static-diagram/static-diagram.component"],[3,"spaceArrows","arrowShape"],[1,"controls"],["routerLink","../02-component-svg"],["routerLink","../04-cubic-bezier"],["type","radio","name","arrowShape",3,"value","ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.TgZ(0,"h3"),e._uU(1,"Exemple d'un diagramme de d\xe9pendances"),e.qZA(),e.TgZ(2,"p"),e._uU(3," Cet exemple montre comment l'association entre SVG et HTML permet de construire un diagramme dynamique mais pas interactif.\n"),e.qZA(),e.TgZ(4,"div",0)(5,"div",1)(6,"label")(7,"input",2),e.NdJ("ngModelChange",function(p){return i.spaceArrowsValue=p}),e.qZA(),e._uU(8," Centrer les fl\xe8ches sur les n\u0153uds "),e.qZA()(),e.TgZ(9,"div",1),e.YNc(10,b,4,3,"ng-container",3),e.qZA()(),e.TgZ(11,"lcd-code-reader",4),e._UZ(12,"lcd-static-diagram",5),e.qZA(),e.TgZ(13,"div",6)(14,"button",7),e._uU(15,"Pr\xe9c\xe9dent"),e.qZA(),e.TgZ(16,"button",8),e._uU(17,"Suivant"),e.qZA()()),2&n&&(e.xp6(7),e.Q6J("ngModel",i.spaceArrowsValue),e.xp6(3),e.Q6J("ngForOf",i.arrowShapes),e.xp6(2),e.Q6J("spaceArrows",i.spaceArrowsValue)("arrowShape",i.arrowShapeValue))},dependencies:[u.ez,u.sg,_.E,D,M.rH,g.u5,g.Fj,g.Wl,g._,g.JJ,g.On],styles:[".selectors[_ngcontent-%COMP%]{margin:var(--space-m) 0}.selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:var(--space-s)}label[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),s})()}}]);