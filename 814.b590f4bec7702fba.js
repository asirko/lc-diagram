"use strict";(self.webpackChunklc_diagram=self.webpackChunklc_diagram||[]).push([[814],{2814:(O,f,d)=>{d.r(f),d.d(f,{default:()=>A});var u=d(6814),_=d(239),e=d(5879);const x=["depDiv"];function y(t,o){1&t&&(e.O4$(),e._UZ(0,"path",6)),2&t&&e.uIk("d",o.$implicit)}function $(t,o){if(1&t&&(e.O4$(),e.TgZ(0,"svg",2)(1,"defs")(2,"marker",3),e._UZ(3,"polygon",4),e.qZA()(),e.YNc(4,y,1,1,"path",5),e.qZA()),2&t){const i=e.oxw();e.uIk("viewBox",i.viewBox),e.xp6(4),e.Q6J("ngForOf",i.arrowPaths)}}function S(t,o){if(1&t&&(e.TgZ(0,"div",9,10),e._uU(2),e.qZA()),2&t){const i=o.$implicit;e.uIk("data-name",i),e.xp6(2),e.hij(" ",i," ")}}function b(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,S,3,2,"div",8),e.qZA()),2&t){const i=o.$implicit;e.xp6(1),e.Q6J("ngForOf",i)}}const m={A:[],B:[],C:[],D:["A","B"],E:["B","C"],F:["D","E"]};var l=function(t){return t.StraightLine="Ligne simple",t.CubicBezier="Cubic Bezier simple",t.CubicBezierLighterCurve="Cubic Bezier adoucie",t.CubicBezierLighterIncidence="Cubic Bezier incidence inclin\xe9e",t}(l||{});let B=(()=>{var t;class o{constructor(){this.elementRef=(0,e.f3M)(e.SBq),this.cdr=(0,e.f3M)(e.sBO),this.spaceArrows=!1,this.arrowShape=l.CubicBezier,this.dependenciesByDepth=[]}ngOnChanges(){if(!this.dependenciesByDepth.length){let n=0,a=Object.entries(m);for(;a.length;)this.dependenciesByDepth[n]=[],a=a.filter(c=>{const[p,g]=c;return!g.every(r=>this.dependenciesByDepth.slice(0,-1).flat().includes(r))||(this.dependenciesByDepth[n].push(p),!1)}),n++}this.depDivs&&this._drawArrows()}ngAfterViewChecked(){const n=this.elementRef.nativeElement.getBoundingClientRect(),a=`${n.left} ${n.top} ${n.width} ${n.height}`;this.viewBox!==a&&(this.viewBox=a,this._drawArrows())}resize(){}_drawArrows(){const n=new Map;this.depDivs.forEach(a=>{const c=a.nativeElement.getAttribute("data-name"),p=a.nativeElement?.getBoundingClientRect();n.set(c,p)}),this.arrowPaths=[];for(const a of Object.keys(m))m[a]?.forEach(c=>{const p=n.get(c),g=n.get(a),r={x:p.left+p.width/2,y:p.top+p.height},s={x:g.left+g.width/2,y:g.top},w=r.x>s.x?-1:r.x===s.x?0:1;switch(this.spaceArrows&&(r.x+=w*p.width/6,s.x-=w*g.width/6),this.arrowShape){case l.StraightLine:this.arrowPaths.push(`M ${r.x} ${r.y} L ${s.x} ${s.y}`);break;case l.CubicBezier:this.arrowPaths.push(`M ${r.x} ${r.y} C ${r.x} ${s.y} ${s.x} ${r.y} ${s.x} ${s.y}`);break;case l.CubicBezierLighterCurve:const C=(r.y+s.y)/2;this.arrowPaths.push(`M ${r.x} ${r.y} C ${r.x} ${C} ${s.x} ${C} ${s.x} ${s.y}`);break;case l.CubicBezierLighterIncidence:const v=(r.x-s.x)/3;this.arrowPaths.push(`M ${r.x} ${r.y}C ${r.x-v} ${s.y} ${s.x+v} ${r.y} ${s.x} ${s.y}`)}});this.cdr.detectChanges()}}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["lcd-static-diagram"]],viewQuery:function(n,a){if(1&n&&e.Gf(x,5),2&n){let c;e.iGM(c=e.CRH())&&(a.depDivs=c)}},hostBindings:function(n,a){1&n&&e.NdJ("resize",function(){return a.resize()},!1,e.Jf7)},inputs:{spaceArrows:"spaceArrows",arrowShape:"arrowShape"},standalone:!0,features:[e.TTD,e.jDz],decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","dep-row",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg"],["id","arrowhead","markerWidth","6","markerHeight","4","refX","5","refY","2","orient","auto"],["points","0 0, 6 2, 0 4"],["stroke","#000","fill","none","stroke-width","2","marker-end","url(#arrowhead)",4,"ngFor","ngForOf"],["stroke","#000","fill","none","stroke-width","2","marker-end","url(#arrowhead)"],[1,"dep-row"],["class","dep",4,"ngFor","ngForOf"],[1,"dep"],["depDiv",""]],template:function(n,a){1&n&&(e.YNc(0,$,5,2,"svg",0),e.YNc(1,b,2,1,"div",1)),2&n&&(e.Q6J("ngIf",a.viewBox),e.xp6(1),e.Q6J("ngForOf",a.dependenciesByDepth))},dependencies:[u.ez,u.sg,u.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:5rem;position:relative}svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.dep-row[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.dep[_ngcontent-%COMP%]{border:1px solid black;padding:var(--space-s) var(--space-m);border-radius:var(--space-s)}"],changeDetection:0}),o})();var D=d(8237),h=d(95);function M(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"label")(1,"input",9),e.NdJ("ngModelChange",function(a){e.CHM(i);const c=e.oxw();return e.KtG(c.arrowShapeValue=a)}),e.qZA(),e._uU(2),e.qZA()}if(2&t){const i=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("value",i)("ngModel",n.arrowShapeValue),e.xp6(1),e.hij(" ",i," ")}}let A=(()=>{var t;class o{constructor(){this.arrowShapes=Object.values(l),this.spaceArrowsValue=!1,this.arrowShapeValue=l.StraightLine}}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["lcd-static-graph"]],standalone:!0,features:[e.jDz],decls:18,vars:4,consts:[[1,"selectors"],[1,"selector"],["type","checkbox",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["path","./app/features/03-static-graph/static-diagram/static-diagram.component"],[3,"spaceArrows","arrowShape"],[1,"controls"],["routerLink","../02-component-svg"],["routerLink","../04-cubic-bezier"],["type","radio","name","arrowShape",3,"value","ngModel","ngModelChange"]],template:function(n,a){1&n&&(e.TgZ(0,"h3"),e._uU(1,"Exemple d'un diagramme de d\xe9pendances"),e.qZA(),e.TgZ(2,"p"),e._uU(3," Cet exemple montre comment l'association entre SVG et HTML permet de construire un diagramme dynamique mais pas interactif.\n"),e.qZA(),e.TgZ(4,"div",0)(5,"div",1)(6,"label")(7,"input",2),e.NdJ("ngModelChange",function(p){return a.spaceArrowsValue=p}),e.qZA(),e._uU(8," Espacer les fl\xe8ches sur les n\u0153uds "),e.qZA()(),e.TgZ(9,"div",1),e.YNc(10,M,3,3,"label",3),e.qZA()(),e.TgZ(11,"lcd-code-reader",4),e._UZ(12,"lcd-static-diagram",5),e.qZA(),e.TgZ(13,"div",6)(14,"button",7),e._uU(15,"Pr\xe9c\xe9dent"),e.qZA(),e.TgZ(16,"button",8),e._uU(17,"Suivant"),e.qZA()()),2&n&&(e.xp6(7),e.Q6J("ngModel",a.spaceArrowsValue),e.xp6(3),e.Q6J("ngForOf",a.arrowShapes),e.xp6(2),e.Q6J("spaceArrows",a.spaceArrowsValue)("arrowShape",a.arrowShapeValue))},dependencies:[u.ez,u.sg,_.E,B,D.rH,h.u5,h.Fj,h.Wl,h._,h.JJ,h.On],styles:[".selectors[_ngcontent-%COMP%]{margin:var(--space-m) 0}.selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:var(--space-s)}label[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width: 768px){.selectors[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),o})()}}]);